let availableNumbers = [];
let minVal, maxVal;

function startLottery() {
  const minInput = document.getElementById('min').value;
  const maxInput = document.getElementById('max').value;

  minVal = parseInt(minInput);
  maxVal = parseInt(maxInput);

  if (isNaN(minVal) || isNaN(maxVal) || minVal > maxVal) {
    alert('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø¹Ø¯Ø¯ Ø´Ø±ÙˆØ¹ Ø¨Ø§ÛŒØ¯ Ú©ÙˆÚ†Ú©ØªØ± ÛŒØ§ Ù…Ø³Ø§ÙˆÛŒ Ø¹Ø¯Ø¯ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø´Ø¯).');
    return;
  }

  availableNumbers = [];
  for (let i = minVal; i <= maxVal; i++) {
    availableNumbers.push(i);
  }

  document.getElementById('range-display').textContent = `${minVal} ØªØ§ ${maxVal}`;
  document.getElementById('setup').classList.remove('active');
  document.getElementById('lottery').classList.add('active');
  document.getElementById('winner-number').innerHTML = 'ğŸ†'; // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¨Ù‡ Ø¢ÛŒÚ©ÙˆÙ† Ø¬Ø§Ù…
}

function drawNumber() {
  const drawBtn = document.getElementById('draw-btn');
  const winnerDisplay = document.getElementById('winner-number');

  if (availableNumbers.length === 0) {
    winnerDisplay.textContent = 'ØªÙ…Ø§Ù… Ø´Ø¯!';
    drawBtn.disabled = true;
    return;
  }

  drawBtn.disabled = true; // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ø¯Ø± Ø­ÛŒÙ† Ø§Ù†ÛŒÙ…ÛŒØ´Ù†

  // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø´Ù…Ø§Ø±Ø´ Ø³Ø±ÛŒØ¹ Ø§Ø¹Ø¯Ø§Ø¯
  let animationInterval = setInterval(() => {
    const randomNumber = Math.floor(Math.random() * (maxVal - minVal + 1)) + minVal;
    winnerDisplay.textContent = randomNumber;
  }, 50); // Ù‡Ø± 50 Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡ ÛŒÚ© Ø¹Ø¯Ø¯ ØªØµØ§Ø¯ÙÛŒ Ù†Ø´Ø§Ù† Ø¨Ø¯Ù‡

  // ØªÙˆÙ‚Ù Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ø¹Ø¯ Ø§Ø² 2.5 Ø«Ø§Ù†ÛŒÙ‡ Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø¨Ø±Ù†Ø¯Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ
  setTimeout(() => {
    clearInterval(animationInterval);

    const randomIndex = Math.floor(Math.random() * availableNumbers.length);
    const winner = availableNumbers.splice(randomIndex, 1)[0];
    
    winnerDisplay.textContent = winner; // Ù†Ù…Ø§ÛŒØ´ Ø¹Ø¯Ø¯ Ø¨Ø±Ù†Ø¯Ù‡ Ù†Ù‡Ø§ÛŒÛŒ
    winnerDisplay.style.transform = 'scale(1.5)';
    winnerDisplay.style.transition = 'transform 0.3s ease';
    setTimeout(() => {
        winnerDisplay.style.transform = 'scale(1)';
    }, 300);


    if (availableNumbers.length === 0) {
        // Ø§Ú¯Ø± Ø§ÛŒÙ† Ø¢Ø®Ø±ÛŒÙ† Ø¹Ø¯Ø¯ Ø¨ÙˆØ¯ØŒ Ù¾ÛŒØ§Ù… Ù¾Ø§ÛŒØ§Ù†ÛŒ Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¨Ø¯Ù‡
        setTimeout(() => {
            winnerDisplay.textContent = `ğŸ‰ ${winner}`;
            alert('ğŸ‰ Ù‡Ù…Ù‡ Ø§Ø¹Ø¯Ø§Ø¯ Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ Ø´Ø¯Ù†Ø¯!');
        }, 1500);
    } else {
        drawBtn.disabled = false; // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù…Ø¬Ø¯Ø¯ Ø¯Ú©Ù…Ù‡
    }

  }, 2500); // Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ú©Ù„ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
}

function resetLottery() {
  document.getElementById('lottery').classList.remove('active');
  document.getElementById('setup').classList.add('active');
  document.getElementById('draw-btn').disabled = false;
  document.getElementById('winner-number').innerHTML = 'ğŸ†';
  // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯
  document.getElementById('min').value = '1';
  document.getElementById('max').value = '100';
}
